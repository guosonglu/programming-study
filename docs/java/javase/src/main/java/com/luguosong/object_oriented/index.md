# 面向对象基础

## 什么是对象

现实世界中的对象有两个共同特征：它们都有`状态`和`行为`。

> 狗有状态（名字、颜色、品种、是否饥饿）和行为（叫、取物、摇尾巴）。自行车也有状态（当前档位、当前踏频、当前速度）和行为（换档、改变踏频、刹车）。识别现实世界对象的状态和行为是开始用面向对象编程思维进行思考的好方法。

软件对象在概念上类似于现实世界的对象：它们也由`状态`和相关`行为`组成。

一个对象在`字段`（某些编程语言中的变量）中存储其状态，并通过`方法`（某些编程语言中的函数）展示其行为。

> `方法`操作对象的内部状态，并作为对象之间通信的主要机制。隐藏内部状态并要求所有交互都通过对象的方法进行，这被称为`数据封装`——面向对象编程的一个基本原则。

!!! note "将代码打包成单独的软件对象有许多好处"

    - `模块化`：对象的源代码可以独立于其他对象的源代码编写和维护。一旦创建，对象可以在系统内部轻松传递。
    - `信息隐藏`：通过仅与对象的方法交互，其内部实现的细节对外界保持隐藏。
    - `代码重用`：如果一个对象已经存在（可能由其他软件开发人员编写），你可以在你的程序中使用该对象。这使得专家可以实现、测试和调试复杂的、特定任务的对象，然后你可以信任这些对象在你的代码中运行。
    - `插件化和调试方便`：如果某个对象出现问题，你可以简单地将其从应用程序中移除，并插入一个不同的对象作为替换。这类似于现实世界中的机械问题修复。如果一个螺栓断了，你就换一个新的。

## 封装性⭐

`封装`：类通过暴露`有限的访问接口`，授权外部仅能通过类提供的方式（或者叫`函数`）来访问内部信息或者数据。

需要编程语言提供`访问权限控制`语法的支持。

!!! note "封装特性的作用"

    - 目的是隐藏信息、保护数据。
    - 假如属性可以随意被以各种奇葩的方式修改，而且修改逻辑可能散落在代码中的各个角落，势必影响代码的`可读性`、`可维护性`。
    - 类仅仅通过有限的方法暴露必要的操作，也能提高类的`易用性`。

## 类

## 抽象性⭐

`抽象`讲的是如何`隐藏方法的具体实现`，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。

在面向对象编程中，我们常借助编程语言提供的`接口类`（比如Java中的interface关键字语法）或者`抽象类`（比如Java中的abstract关键字语法）这两种语法机制，来实现抽象这一特性。

类的方法是通过编程语言中的`函数`这一语法机制来实现的。通过函数包裹具体的实现逻辑，这本身就是一种抽象。调用者在使用函数的时候，并不需要去研究函数内部的实现逻辑，只需要通过函数的命名、注释或者文档，了解其提供了什么功能，就可以直接使用了。

!!! note "抽象为什么有时候被排除在面向对象编程特性之外"

    `抽象`这个概念是一个非常通用的设计思想，并不单单用在面向对象编程中，也可以用来指导架构设计等。而且这个特性也并不需要编程语言提供特殊的语法机制来支持，只需要提供`函数`这一非常基础的语法机制，就可以实现抽象特性、所以，它没有很强的`特异性`，有时候并不被看作面向对象编程的特性之一。

!!! note "抽象特性的作用"

    - 帮助开发者略掉一些非关键性的实现细节。帮助过滤掉许多非必要的信息。
    - 作为一种设计思想，代码设计中，起到非常重要的指导作用。

## 继承性⭐

继承是用来表示类之间的 `is-a` 关系。Java中的继承机制是通过`extends`关键字实现的。

!!! note "单继承和多继承"

    `单继承`表示一个子类只继承一个父类。

    `多继承`表示一个子类可以继承多个父类，比如猫既是哺乳动物，又是爬行动物。

    Java采用`单继承`模式。C++采用`多继承`模式。

!!! note "继承特性的作用"

    - 代码复用
    - 构建一种`is-a`关系

!!! warning "过度使用继承存在的问题"

    - 继承层次过深过复杂，就会导致代码`可读性`、`可维护性`变差。为了了解一个类的功能，我们不仅需要查看这个类的代码，还需要按照继承关系一层一层地往上查看`父类、父类的父类……`的代码。
    - 子类和父类高度耦合，修改父类的代码，会直接影响到子类。


## 多态性⭐

多态是指，子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。

使用以下方式实现多态性：

- `继承+方法重写`：子类替代父类中的方法
- `接口`：多个实现类实现同一个接口
- `duck-typing 语法`：只有一些动态语言才支持，比如 Python、JavaScript 等

!!! note "多态特性的作用"

    - 提高代码拓展性：当新增新的需求时，只需要增加新的实现类，不需要修改原有代码。
    - 代码复用性：针对不同的情况（子类不同），我们可以使用相同的代码（接口）去应对。
    
