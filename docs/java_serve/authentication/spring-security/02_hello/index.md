# Spring Security 入门

Spring Boot 是应用开发在 Spring 框架上的一个进化阶段。它取代了手动编写所有配置的需求，提供了一些预配置项，你只需覆盖那些与你实现不匹配的配置。这种方法也被称为约定优于配置。Spring
Boot 已经不再是一个新概念，如今我们已经在使用它的第三个版本来编写应用程序。

在 Spring Boot
之前，开发者们常常需要为每个应用程序重复编写几十行代码。在过去，大多数架构都是单体架构，这种情况并不明显。使用单体架构时，你只需在一开始编写一次配置，之后很少需要再动它们。随着面向服务的软件架构的发展，我们开始感受到为每个服务配置时必须编写样板代码的痛苦。

由于这个原因，随着最近应用程序的发展，尤其是微服务应用程序，Spring Boot 变得越来越受欢迎。Spring Boot
为你的项目提供自动配置，缩短了设置所需的时间。可以说，它符合当今软件开发的理念。

在本章中，我们将从第一个使用Spring Security的应用程序开始。对于使用Spring Framework开发的应用程序，Spring
Security是实现应用级安全的绝佳选择。我们将使用Spring Boot，并讨论按约定配置的默认设置，同时简要介绍如何覆盖这些默认设置。考虑默认配置是了解Spring
Security的一个很好的入门方法，同时也能说明认证的概念。

一旦我们开始第一个项目，我们将更详细地讨论各种身份验证选项。在第3到第6章中，我们将继续介绍每个不同职责的具体配置，你将在第一个示例中看到这些配置。你还会看到根据不同的架构风格应用这些配置的方法。本章我们将讨论的步骤如下：

- 创建一个仅包含 Spring Security 和 Web 依赖项的项目，看看在没有添加任何配置的情况下它的表现。这样，你就能了解默认配置在身份验证和授权方面的预期效果。
- 将项目更改为添加用户管理功能，通过重写默认设置来定义自定义用户和密码。
- 在观察到应用程序默认对所有端点进行身份验证后，了解到这一点也可以进行自定义。
- 对相同配置应用不同风格，以了解最佳实践。

## 开始你的第一个项目

让我们创建第一个项目，作为我们的第一个示例。这个项目是一个小型的Web应用程序，公开一个REST端点。你会看到，在不做太多工作的情况下，Spring
Security使用`HTTP Basic认证`来保护这个端点。HTTP Basic是一种通过一组凭证（用户名和密码）在HTTP请求头中进行用户认证的方式。

!!! note

    在默认配置下，该应用程序有两种不同的`身份验证机制`：`HTTP Basic`和`表单登录`。不过，我决定一步步来，在后面的章节讨论表单登录。但如果你尝试在浏览器中访问该URL，你会发现你的应用程序实现了一个漂亮的用户身份验证表单，而不是显示一个难看的HTTP Basic框。这样做是为了避免你在使用浏览器实验时感到困惑，但我们会在HTTP Basic部分详细讨论这个问题。

只需创建项目并添加正确的依赖项，Spring Boot 在启动应用程序时就会应用默认配置，包括用户名和密码。

!!! note

    您有多种创建 Spring Boot 项目的选择。一些开发环境提供了直接创建项目的功能。有关更多详细信息，我推荐 Mark Heckler 的《Spring Boot: Up and Running》（O'Reilly Media, 2021）和 Somnath Musib 的《Spring Boot in Practice》（Manning, 2022），或者我写的另一本书《Spring Start Here》（Manning, 2021）。

本文中的示例涉及到书籍配套的源代码。对于每个示例，我还会指定需要添加到pom.xml文件中的依赖项。我建议你下载对应的项目和[源代码](https://www.manning.com/downloads/2105)
。这些项目可以在你遇到问题时提供帮助，你也可以用它们来验证你的最终解决方案。

